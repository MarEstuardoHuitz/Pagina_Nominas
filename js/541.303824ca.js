"use strict";(globalThis["webpackChunkquasar_project"]=globalThis["webpackChunkquasar_project"]||[]).push([[541],{8541:(e,o,i)=>{i.r(o),i.d(o,{default:()=>x});var l=i(9835);const a={class:"row"},d={class:"col-xs-4 col-md-4 q-pa-md"},t={class:"col-xs-4 col-md-4 q-pa-md"},n={class:"col-xs-4 col-md-4 q-pa-md"},r={style:{height:"500px"}};function s(e,o,i,s,u,p){const c=(0,l.up)("q-input"),m=(0,l.up)("q-select"),v=(0,l.up)("q-btn"),g=(0,l.up)("q-form"),h=(0,l.up)("q-td"),f=(0,l.up)("q-table"),E=(0,l.up)("q-page");return(0,l.wg)(),(0,l.j4)(E,{padding:""},{default:(0,l.w5)((()=>[(0,l.Wm)(g,{onSubmit:e.agregarReporte,class:"q-gutter-md"},{default:(0,l.w5)((()=>[(0,l._)("div",a,[(0,l._)("div",d,[(0,l.Wm)(c,{rounded:"",outlined:"",modelValue:e.periodoActivo,"onUpdate:modelValue":o[0]||(o[0]=o=>e.periodoActivo=o),type:"text",disable:"",label:"Id Periodo"},null,8,["modelValue"])]),(0,l._)("div",t,[(0,l.Wm)(m,{rounded:"",outlined:"",modelValue:e.modelEmpleado,"onUpdate:modelValue":[o[1]||(o[1]=o=>e.modelEmpleado=o),o[2]||(o[2]=o=>{e.getReporteEmpleado(o)})],options:e.optionsEmpleado,label:"Seleccione Empleado",filled:""},null,8,["modelValue","options"])]),(0,l._)("div",n,[(0,l.Wm)(c,{rounded:"",outlined:"",modelValue:e.dias,"onUpdate:modelValue":o[3]||(o[3]=o=>e.dias=o),type:"number",label:"Ingrese Total de Dias a Reportar",rules:[e=>e>0&&e<=30||"El nÃºmero debe ser mayor a 0 y menor a 31"]},null,8,["modelValue","rules"])])]),(0,l._)("div",null,[(0,l.Wm)(v,{label:"Agregar",type:"submit",color:"primary"})])])),_:1},8,["onSubmit"]),(0,l._)("div",r,[(0,l.Wm)(f,{class:"full-height",title:"Reporte de Horas por Empleado",rows:e.reporteDiasEmpleadoRows,columns:e.columns,filter:e.filter,pagination:{rowsPerPage:0}},{"body-cell-Eliminar":(0,l.w5)((o=>[(0,l.Wm)(h,{props:o,class:"q-pa-sm"},{default:(0,l.w5)((()=>[(0,l.Wm)(v,{outline:"",size:"sm",color:"red",icon:"delete",label:"Eliminar",onClick:i=>e.bajaReporteDia(o.row)},null,8,["onClick"])])),_:2},1032,["props"])])),_:1},8,["rows","columns","filter"])])])),_:1})}var u=i(9302),p=i(4136),c=i(8651),m=i(499),v=i(8339),g=function(e,o,i,l){function a(e){return e instanceof i?e:new i((function(o){o(e)}))}return new(i||(i=Promise))((function(i,d){function t(e){try{r(l.next(e))}catch(o){d(o)}}function n(e){try{r(l["throw"](e))}catch(o){d(o)}}function r(e){e.done?i(e.value):a(e.value).then(t,n)}r((l=l.apply(e,o||[])).next())}))};const h=[{name:"IdPeriodo",label:"Id Periodo",field:"id_periodo",align:"center"},{name:"IdEmpleado",label:"Id Empleado",field:"id_empleado",align:"center"},{name:"DiasReporte",label:"Dias Reportados",field:"reporte_dias",align:"center"},{name:"Eliminar",label:"Eliminar",field:"Eliminar",align:"center"}],f=(0,l.aZ)({name:"ReportePage",setup(){const e=(0,u.Z)(),o=(0,v.tv)(),i=(0,m.iH)(null),l=(0,m.iH)(""),a=(0,m.iH)([]),d=(0,m.iH)([]),t=(0,m.iH)(null),n=(0,m.iH)(null),r=()=>g(this,void 0,void 0,(function*(){yield p.api.get(p.endPoints.EMPLEADOS+"/combo").then((e=>{d.value=e.data})).catch((e=>{(0,c.L1)(e)}))})),s=o=>g(this,void 0,void 0,(function*(){const l=o.value;e.loading.show(),yield p.api.get(p.endPoints.REPORTE_DIAS,{params:{idEmpleado:l,idPeriodo:i.value}}).then((e=>{a.value=e.data})).catch((e=>{(0,c.L1)(e)})).finally((()=>{e.loading.hide()}))})),f=o=>g(this,void 0,void 0,(function*(){const l=yield(0,c.pW)("Confirmacion","Esta seguro de Eliminar?",{});if(!l)return;const a=o.id_empleado;e.loading.show(),yield p.api.delete(p.endPoints.REPORTE_DIAS,{params:{idEmpleado:a,idPeriodo:i.value}}).then((e=>g(this,void 0,void 0,(function*(){yield s({value:a}),(0,c.dF)("Proceso Correcto")})))).catch((e=>{(0,c.L1)(e)})).finally((()=>{e.loading.hide()}))})),E=()=>g(this,void 0,void 0,(function*(){e.loading.show(),yield p.api.get(p.endPoints.PERIODOS+"/activo").then((l=>{if(!l.data[0])return(0,c.x2)("Error",{subtitulo:"No existe un Periodo Activo, debe aperturar el periodo",timeout:1e4}),e.loading.hide(),void o.back();i.value=l.data[0].id})).catch((e=>{(0,c.L1)(e)})).finally((()=>{e.loading.hide()}))})),b=()=>g(this,void 0,void 0,(function*(){if(!i.value||!n.value||!t.value)return void(0,c.x2)("Debe Seleccionar todos los campos");const o=yield(0,c.pW)("Confirmacion","Desea Reportar los dias al Empleado?",{});if(!o)return;const l={idPeriodo:i.value,dias:n.value,idEmpleado:t.value.value};e.loading.show();yield p.api.post(p.endPoints.REPORTE_DIAS,l).then((e=>g(this,void 0,void 0,(function*(){200===e.status&&((0,c.dF)("Reportado Correctamente"),yield s({value:l.idEmpleado}),n.value=null)})))).catch((e=>{(0,c.L1)(e)}));e.loading.hide()}));return{getPeriodoActivo:E,reporteDiasEmpleadoRows:a,columns:h,periodoActivo:i,filter:l,agregarReporte:b,getEmpleados:r,modelEmpleado:t,optionsEmpleado:d,dias:n,getReporteEmpleado:s,bajaReporteDia:f}},created(){this.getPeriodoActivo(),this.getEmpleados()}});var E=i(1639),b=i(9885),P=i(8326),y=i(3119),R=i(6384),w=i(8879),_=i(7580),q=i(7220),D=i(9984),A=i.n(D);const I=(0,E.Z)(f,[["render",s]]),x=I;A()(f,"components",{QPage:b.Z,QForm:P.Z,QInput:y.Z,QSelect:R.Z,QBtn:w.Z,QTable:_.Z,QTd:q.Z})}}]);